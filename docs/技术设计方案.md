# Issue Tracker CLI å·¥å…· - æŠ€æœ¯è®¾è®¡æ–¹æ¡ˆ

> **ç‰ˆæœ¬**: 2.2
> **æ—¥æœŸ**: 2026-02-05
> **ä½œè€…**: Claude Code
> **å®šä½**: å¤šé¡¹ç›®é€šç”¨å¼€å‘å·¥å…·ï¼Œæ”¯æŒç‹¬ç«‹é…ç½®å’Œæ•°æ®å­˜å‚¨

---

## 1. æ¦‚è¿°

### 1.1 èƒŒæ™¯

Issue Tracker CLI æ˜¯ä¸€ä¸ªé€šç”¨çš„ Issue è¿½è¸ªå‘½ä»¤è¡Œå·¥å…·ï¼Œæ”¯æŒå¤šé¡¹ç›®ç‹¬ç«‹è¿è¡Œã€‚é€šè¿‡ `-p project_id` åˆ‡æ¢é¡¹ç›®ï¼Œæ¯ä¸ªé¡¹ç›®æ‹¥æœ‰ç‹¬ç«‹çš„é…ç½®æ–‡ä»¶å’Œæ•°æ®åº“ï¼Œæ•°æ®å®Œå…¨éš”ç¦»ã€‚

### 1.2 æ ¸å¿ƒè®¾è®¡ç›®æ ‡

| ç›®æ ‡ | è¯´æ˜ |
|------|------|
| **å¤šé¡¹ç›®æ”¯æŒ** | é€šè¿‡ project_id åˆ‡æ¢ï¼Œé…ç½®å’Œæ•°æ®åº“ç‹¬ç«‹å­˜å‚¨ |
| **ç¼–å·è‡ªåŠ¨åˆ†é…** | å…¨å±€è‡ªåŠ¨é€’å¢åºå·ï¼Œæ— éœ€æ‰‹åŠ¨ç®¡ç† |
| **é›¶ä¾èµ–** | ä»…ä¾èµ– Python æ ‡å‡†åº“ + PyYAML |
| **åŒå‘åŒæ­¥** | MD â†’ DB (migrate) + DB â†’ MD (export) |
| **CLI å‹å¥½** | æ”¯æŒè„šæœ¬è°ƒç”¨ + ç›´æ¥ `sqlite3` å‘½ä»¤è¡Œè®¿é—® |
| **GitHub é›†æˆ** | è‡ªåŠ¨å…³é—­å·²ä¿®å¤é—®é¢˜çš„ GitHub Issue |

### 1.3 æŠ€æœ¯æ ˆ

- **è¯­è¨€**: Python 3.10+
- **æ•°æ®åº“**: SQLite3 (å†…ç½®)
- **é…ç½®**: YAML (PyYAML)
- **æµ‹è¯•**: unittest (å†…ç½®)
- **å¤–éƒ¨ä¾èµ–**: `gh` CLI (GitHub åŒæ­¥åŠŸèƒ½)

---

## 2. ç³»ç»Ÿæ¶æ„

### 2.1 æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      XDG ç›®å½•ç»“æ„                                        â”‚
â”‚  $XDG_CONFIG_HOME/issue-tracker/                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ globals.yaml   â”‚  â”‚ 001_Proj.yaml  â”‚  â”‚ 002_Another.yaml       â”‚    â”‚
â”‚  â”‚ (å…¨å±€é»˜è®¤å€¼)   â”‚  â”‚ (é¡¹ç›®é…ç½®)     â”‚  â”‚ (é¡¹ç›®é…ç½®)             â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  $XDG_DATA_HOME/issue-tracker/                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ 001_Proj.db    â”‚  â”‚ exports/       â”‚  â”‚ backups/               â”‚    â”‚
â”‚  â”‚ (æ•°æ®åº“)       â”‚  â”‚ (MD å¯¼å‡º)      â”‚  â”‚ (tar.gz å¤‡ä»½)          â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  <é¡¹ç›®ç›®å½•>/issue-tracker.yaml  â† é¡¹ç›®æœ¬åœ°é…ç½®ï¼ˆä¼˜å…ˆçº§æœ€é«˜ï¼‰            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Issue Tracker CLI                               â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   cli.py         â”‚  â”‚   ui.py          â”‚  â”‚  project_init.py     â”‚  â”‚
â”‚  â”‚  (å‘½ä»¤å…¥å£)      â”‚  â”‚  (iss-ui èœå•)   â”‚  â”‚  (iss-project å¼•å¯¼)  â”‚  â”‚
â”‚  â”‚  -p / -c åˆ‡é¡¹ç›®  â”‚  â”‚  å…¨å±€ç®¡ç†èœå•     â”‚  â”‚  åˆ›å»º/ç¼–è¾‘é¡¹ç›®é…ç½®   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚           â”‚                     â”‚                        â”‚              â”‚
â”‚           â–¼                     â–¼                        â–¼              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                        Core å±‚                                  â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚
â”‚  â”‚  â”‚ config   â”‚  â”‚ database â”‚  â”‚ exporter  â”‚  â”‚ github_sync   â”‚  â”‚    â”‚
â”‚  â”‚  â”‚ (åŠ è½½æ ¡éªŒ)â”‚  â”‚ (CRUD)   â”‚  â”‚ (MD ç”Ÿæˆ) â”‚  â”‚ (gh åŒæ­¥)     â”‚  â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚    â”‚
â”‚  â”‚  â”‚  model   â”‚  â”‚  paths   â”‚  â”‚  global   â”‚                     â”‚    â”‚
â”‚  â”‚  â”‚(æ•°æ®ç±»)  â”‚  â”‚(XDG è·¯å¾„)â”‚  â”‚ _config   â”‚                     â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                     Migrator æ’ä»¶å±‚                              â”‚    â”‚
â”‚  â”‚  BaseMigrator (æŠ½è±¡åŸºç±») â—„â”€â”€ WeldSmartMigrator                  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 é…ç½®æ–‡ä»¶æŸ¥æ‰¾é€»è¾‘

```
ç”¨æˆ·å‘½ä»¤: issue-tracker -p 001 stats
                    â”‚
                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é…ç½®æŸ¥æ‰¾ä¼˜å…ˆçº§:                                              â”‚
â”‚                                                             â”‚
â”‚  1. -p <project_id>      â†’ æœç´¢ .config/{project_id}_*.yaml  â”‚
â”‚  2. -c <config>          â†’ ç›´æ¥ä½¿ç”¨æŒ‡å®šè·¯å¾„                   â”‚
â”‚  3. (æ— å‚æ•°)             â†’ ä¾æ¬¡æŸ¥æ‰¾:                         â”‚
â”‚     a) å½“å‰ç›®å½•/config.yaml                                    â”‚
â”‚     b) .config/ å”¯ä¸€é…ç½®æ–‡ä»¶                                   â”‚
â”‚     c) git root/config.yaml                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.3 æ¨¡å—èŒè´£

| æ¨¡å— | æ–‡ä»¶ | èŒè´£ |
|------|------|------|
| **CLI å…¥å£** | `cli.py` | å‚æ•°è§£æã€é¡¹ç›®åˆ‡æ¢ã€å‘½ä»¤åˆ†å‘ã€é”™è¯¯å¤„ç† |
| **ç®¡ç†èœå•** | `ui.py` | `iss-ui` äº¤äº’èœå•ï¼šè·¯å¾„æŸ¥çœ‹ã€å…¨å±€é…ç½®ã€é¡¹ç›®ç®¡ç†ã€å¤‡ä»½/æ¢å¤ã€GitHub è¿æ¥ |
| **é¡¹ç›®å¼•å¯¼** | `project_init.py` | `iss-project` å¼•å¯¼åˆ›å»ºä¸ç¼–è¾‘é¡¹ç›®é…ç½®æ–‡ä»¶ |
| **é…ç½®ç®¡ç†** | `core/config.py` | åŠ è½½æ ¡éªŒã€ä¼˜å…ˆçº§/çŠ¶æ€æšä¸¾æ ¡éªŒ |
| **å…¨å±€é…ç½®** | `core/global_config.py` | è¯»å†™ `globals.yaml`ï¼Œæä¾›æ–°é¡¹ç›®é»˜è®¤å€¼ |
| **è·¯å¾„å·¥å…·** | `core/paths.py` | XDG ç›®å½•è§£æã€`ensure_directories()`ã€é…ç½®æŸ¥æ‰¾ |
| **æ•°æ®è®¿é—®** | `core/database.py` | SQLite CRUDã€æŸ¥è¯¢è¿‡æ»¤ã€ç»Ÿè®¡èšåˆ |
| **æ•°æ®æ¨¡å‹** | `core/model.py` | Issue æ•°æ®ç±»å®šä¹‰ |
| **å¯¼å‡ºå™¨** | `core/exporter.py` | DB â†’ Markdown è½¬æ¢ |
| **GitHub åŒæ­¥** | `core/github_sync.py` | è°ƒç”¨ gh CLIã€è®°å½•åŒæ­¥æ—¥å¿— |
| **è¿ç§»æ’ä»¶** | `migrators/*.py` | æºæ–‡ä»¶è§£æï¼ˆé¡¹ç›®ç‰¹å®šï¼‰ |

---

## 3. æ•°æ®æ¨¡å‹è®¾è®¡

### 3.1 æ•°æ®åº“ Schema

```sql
-- æ ¸å¿ƒé—®é¢˜è¡¨
CREATE TABLE IF NOT EXISTS issues (
    id              TEXT    PRIMARY KEY,       -- é—®é¢˜ç¼–å· (çº¯æ•°å­—å¦‚ 001, 002)
    title           TEXT    NOT NULL,          -- æ ‡é¢˜
    priority        TEXT    NOT NULL,          -- ä¼˜å…ˆçº§ (P0/P1/P2/P3)
    status          TEXT    NOT NULL DEFAULT 'pending',  -- çŠ¶æ€
    discovery_date  TEXT    NOT NULL,          -- å‘ç°æ—¥æœŸ YYYY-MM-DD
    fix_date        TEXT,                       -- ä¿®å¤æ—¥æœŸ YYYY-MM-DD
    file_path       TEXT,                       -- æ–‡ä»¶è·¯å¾„ (é€—å·åˆ†éš”)
    location        TEXT,                       -- ä½ç½®æè¿°
    description     TEXT,                       -- é—®é¢˜æè¿°
    impact          TEXT,                       -- å½±å“
    fix_plan        TEXT,                       -- ä¿®å¤æ–¹æ¡ˆ
    estimated_hours REAL,                       -- é¢„è®¡å·¥æ—¶
    actual_hours    REAL,                       -- å®é™…å·¥æ—¶
    phase           TEXT,                       -- æ‰€å±é˜¶æ®µ
    github_issue_id INTEGER,                   -- GitHub Issue ç¼–å·
    created_at      TEXT    DEFAULT (datetime('now')),
    updated_at      TEXT    DEFAULT (datetime('now'))
);

-- GitHub åŒæ­¥æ—¥å¿—è¡¨
CREATE TABLE IF NOT EXISTS github_sync_log (
    id              INTEGER PRIMARY KEY AUTOINCREMENT,
    issue_id        TEXT    NOT NULL,
    github_issue_id INTEGER NOT NULL,
    action          TEXT    NOT NULL,          -- close / comment
    status          TEXT    NOT NULL,          -- success / failed
    error_msg       TEXT,
    synced_at       TEXT    DEFAULT (datetime('now')),
    FOREIGN KEY (issue_id) REFERENCES issues(id)
);

-- ç´¢å¼•
CREATE INDEX idx_priority        ON issues(priority);
CREATE INDEX idx_status          ON issues(status);
CREATE INDEX idx_discovery_date  ON issues(discovery_date);
CREATE INDEX idx_github          ON issues(github_issue_id);

-- è§†å›¾ï¼šå¾…å¤„ç†é—®é¢˜
CREATE VIEW v_pending AS
    SELECT id, title, priority, status, discovery_date, file_path
    FROM issues
    WHERE status IN ('pending', 'in_progress', 'planned')
    ORDER BY priority, discovery_date;

-- è§†å›¾ï¼šæ¦‚è¦æ±‡æ€»
CREATE VIEW v_summary AS
    SELECT id, title, priority, status, discovery_date, fix_date, github_issue_id
    FROM issues
    ORDER BY id;
```

### 3.2 Issue æ•°æ®ç±»

```python
@dataclass
class Issue:
    """é—®é¢˜æ¡ç›®æ•°æ®ç±»."""
    id: str                      # é—®é¢˜ç¼–å· (çº¯æ•°å­—: 001, 002...)
    title: str                   # æ ‡é¢˜
    priority: str                # ä¼˜å…ˆçº§
    status: str                  # çŠ¶æ€
    discovery_date: str          # å‘ç°æ—¥æœŸ
    fix_date: str | None = None  # ä¿®å¤æ—¥æœŸ
    file_path: str | None = None # æ–‡ä»¶è·¯å¾„
    location: str | None = None  # ä½ç½®
    description: str | None = None   # æè¿°
    impact: str | None = None        # å½±å“
    fix_plan: str | None = None      # ä¿®å¤æ–¹æ¡ˆ
    estimated_hours: float | None = None  # é¢„è®¡å·¥æ—¶
    actual_hours: float | None = None     # å®é™…å·¥æ—¶
    phase: str | None = None              # é˜¶æ®µ
    github_issue_id: int | None = None    # GitHub Issue ç¼–å·
```

### 3.3 çŠ¶æ€æšä¸¾

| çŠ¶æ€å€¼ | ç¬¦å· | å«ä¹‰ |
|--------|------|------|
| `fixed` | âœ… | å·²ä¿®å¤/å·²å®Œæˆ |
| `pending` | âŒ | å¾…ä¿®å¤ |
| `in_progress` | ğŸŸ¢ | è¿›è¡Œä¸­ |
| `planned` | ğŸ“‹ | å¾…è§„åˆ’ |
| `n_a` | âš ï¸ | ä¸é€‚ç”¨ |

### 3.4 ç¼–å·è§„åˆ™

**å…¨å±€è‡ªåŠ¨é€’å¢åºå·**: ç¼–å·ä¸ºçº¯æ•°å­—ï¼ˆ001, 002, 003...ï¼‰ï¼Œç”±å·¥å…·è‡ªåŠ¨åˆ†é…ã€‚

| æ“ä½œ | ç¼–å·åˆ†é…æ–¹å¼ |
|------|-------------|
| **æ–°å¢** | è‡ªåŠ¨åˆ†é…ä¸‹ä¸€ä¸ªåºå· |
| **æ›´æ–°** | ä¿æŒåŸç¼–å·ä¸å˜ |
| **è¿ç§»** | æŒ‰å‘ç°æ—¥æœŸæ’åºåè‡ªåŠ¨é‡åˆ†é… |

---

## 4. æ ¸å¿ƒæ¨¡å—è®¾è®¡

### 4.1 é…ç½®ç®¡ç† (Config)

**èŒè´£**:
- åŠ è½½å¹¶æ ¡éªŒ `config.yaml`
- ç¼–å·æ ¼å¼éªŒè¯
- ä¼˜å…ˆçº§/çŠ¶æ€æšä¸¾æ ¡éªŒ

**å…³é”®æ–¹æ³•**:
```python
class Config:
    def __init__(self, config_path: str)
    def is_valid_id(self, issue_id: str) -> bool      # æ ¡éªŒçº¯æ•°å­—
    def is_valid_priority(self, priority: str) -> bool
    def is_valid_status(self, status: str) -> bool
```

**é…ç½®ç»“æ„**:
```yaml
project:
  id: "001"                      # é¡¹ç›®ç¼–å·ï¼ˆçº¯æ•°å­—ï¼‰
  name: "Project Name"

id_rules:
  format: "{num:03d}"            # ç¼–å·æ ¼å¼

priorities: [P0, P1, P2, P3]     # ä¼˜å…ˆçº§åˆ—è¡¨
statuses: [pending, in_progress, planned, fixed, n_a]  # çŠ¶æ€åˆ—è¡¨

github:
  enabled: true
  close_on_fix: true
  comment_template: "è‡ªåŠ¨åŒæ­¥: {issue_id} å·²ä¿®å¤"

export:
  output: "exports/issues.md"    # ç›¸å¯¹äº $XDG_DATA_HOME/issue-tracker
```

### 4.2 æ•°æ®è®¿é—®å±‚ (Database)

**èŒè´£**:
- SQLite è¿æ¥ç®¡ç†
- CRUD æ“ä½œå°è£…
- å¤šæ¡ä»¶æŸ¥è¯¢æ„å»º
- ç»Ÿè®¡èšåˆ

**å…³é”®æ–¹æ³•**:
```python
class Database:
    def add_issue(self, issue: Issue) -> None
    def get_issue(self, issue_id: str) -> Issue | None
    def update_issue(self, issue_id: str, **fields) -> bool
    def delete_issue(self, issue_id: str) -> bool
    def issue_exists(self, issue_id: str) -> bool
    def get_next_id(self) -> int  # è¿”å›ä¸‹ä¸€ä¸ªå¯ç”¨åºå·

    def query_issues(
        self, issue_id: str | None = None,
        priority: str | None = None,
        status: str | None = None,
        phase: str | None = None,
        file_glob: str | None = None,
        github_issue_id: int | None = None,
    ) -> list[Issue]

    def get_stats(self) -> dict
    def get_pending_github_sync(self) -> list[Issue]
    def log_github_sync(self, issue_id: str, gh_id: int,
                       action: str, status: str, error: str | None = None) -> None
```

### 4.3 å¯¼å‡ºå™¨ (Exporter)

**èŒè´£**:
- ä»æ•°æ®åº“ç”Ÿæˆ Markdown æ–‡æ¡£
- ç»Ÿè®¡æ±‡æ€»è¡¨ç”Ÿæˆ

**è¾“å‡ºç»“æ„**:
```markdown
# Project é—®é¢˜æ¸…å•æ±‡æ€»

> ç”Ÿæˆæ—¶é—´: YYYY-MM-DD HH:MM
> æ€»æ¡ç›®æ•°: N | å·²ä¿®å¤: X | å¾…å¤„ç†: Y

## ç›®å½•
...

## æ–‡æ¡£æ ¼å¼è§„èŒƒ
...

## æ€»ä½“ç»Ÿè®¡
### æŒ‰ä¼˜å…ˆçº§ç»Ÿè®¡
### é—®é¢˜æ¦‚è¦æ±‡æ€»

## Critical Priority (P0)
### 001: æ ‡é¢˜ - âœ… å·²ä¿®å¤
...

## å¾…ä¿®å¤é—®é¢˜ä¼˜å…ˆçº§æ’åº
...

## é™„å½•ï¼šé—®é¢˜åˆ†ç±»ç»Ÿè®¡
...
```

### 4.4 GitHub åŒæ­¥ (GithubSync)

**èŒè´£**:
- å•å‘åŒæ­¥: `status=fixed` â†’ å…³é—­ GitHub Issue
- è°ƒç”¨ `gh issue close` CLI å‘½ä»¤
- è®°å½•åŒæ­¥æ—¥å¿—ï¼ˆé¿å…é‡å¤åŒæ­¥ï¼‰

**åŒæ­¥æ¡ä»¶**:
```sql
SELECT * FROM issues
WHERE status = 'fixed'
  AND github_issue_id IS NOT NULL
  AND id NOT IN (
    SELECT issue_id FROM github_sync_log
    WHERE action = 'close' AND status = 'success'
  )
```

**å‘½ä»¤æ ¼å¼**:
```bash
gh issue close <github_issue_id> --comment "è‡ªåŠ¨åŒæ­¥: {issue_id} å·²ä¿®å¤"
```

### 4.5 è¿ç§»æ’ä»¶ (Migrator)

**åŸºç±»æ¥å£**:
```python
class BaseMigrator(ABC):
    @abstractmethod
    def parse(self, source_path: str) -> list[dict]:
        """è§£ææºæ–‡ä»¶ï¼Œè¿”å› issue å­—å…¸åˆ—è¡¨."""
        raise NotImplementedError

    def validate(self, issues: list[dict]) -> list[str]:
        """æ•°æ®å®Œæ•´æ€§æ ¡éªŒï¼Œè¿”å›è­¦å‘Šä¿¡æ¯åˆ—è¡¨."""
        ...
```

**WeldSmartMigrator å®ç°**:

è§£æ `all-issues.md` çš„ç‰¹å®šæ ¼å¼:
- æ ‡é¢˜è¡Œ: `### C-001: æ ‡é¢˜ - âœ… å·²ä¿®å¤/å·²å®Œæˆ`
- å•è¡Œå­—æ®µ: `**å‘ç°æ—¥æœŸ**: YYYY-MM-DD`
- å¤šè¡Œå­—æ®µ: `**é—®é¢˜æè¿°**:` åç»­è¡Œç´¯ç§¯

**çŠ¶æ€ç¬¦å·æ˜ å°„**:
```python
STATUS_SYMBOL_MAP = {
    "âœ…": "fixed",      # å·²ä¿®å¤/å·²å®Œæˆ
    "âŒ": "pending",    # å¾…ä¿®å¤
    "âš ï¸": "n_a",        # ä¸é€‚ç”¨
    "ğŸŸ¢": "in_progress", # è¿›è¡Œä¸­
    "ğŸ“‹": "planned",    # å¾…è§„åˆ’
}
```

### 4.6 è·¯å¾„ç®¡ç† (Paths)

**èŒè´£**:
- æŒ‰ [XDG Base Directory Specification](https://specifications.freedesktop.org/basedir-spec/latest/) è§£æç›®å½•
- å¯åŠ¨æ—¶è‡ªåŠ¨åˆ›å»ºæ‰€éœ€ç›®å½•ç»“æ„

**ç›®å½•æ˜ å°„**:

| ç”¨é€” | è·¯å¾„ |
|------|------|
| é¡¹ç›®é…ç½® | `$XDG_CONFIG_HOME/issue-tracker/` |
| æ•°æ®åº“ | `$XDG_DATA_HOME/issue-tracker/` |
| å¯¼å‡ºæ–‡ä»¶ | `$XDG_DATA_HOME/issue-tracker/exports/` |
| å¤‡ä»½ | `$XDG_DATA_HOME/issue-tracker/backups/` |
| é¡¹ç›®æœ¬åœ°é…ç½® | `<é¡¹ç›®ç›®å½•>/issue-tracker.yaml`ï¼ˆä¼˜å…ˆçº§æœ€é«˜ï¼‰ |

**é…ç½®æŸ¥æ‰¾ä¼˜å…ˆçº§**:
1. `-c <path>` å‚æ•°ç›´æ¥æŒ‡å®š
2. `-p <project_id>` â†’ æœç´¢ `$XDG_CONFIG_HOME/issue-tracker/{id}_*.yaml`
3. æ— å‚æ•° â†’ å½“å‰ç›®å½• `issue-tracker.yaml`ï¼ˆé¡¹ç›®æœ¬åœ°ï¼‰â†’ XDG å”¯ä¸€é…ç½®

### 4.7 å…¨å±€é…ç½® (GlobalConfig)

**èŒè´£**:
- è¯»å†™ `$XDG_CONFIG_HOME/issue-tracker/globals.yaml`
- ä¸ºæ–°é¡¹ç›®æä¾›é»˜è®¤å€¼ï¼ˆä¼˜å…ˆçº§åˆ—è¡¨ã€çŠ¶æ€åˆ—è¡¨ã€GitHub è¯„è®ºæ¨¡æ¿ï¼‰

**ä¼˜å…ˆçº§**: `globals.yaml` ä¸­çš„å€¼ > å†…ç½®ç¡¬ç¼–ç é»˜è®¤å€¼ã€‚é¦–æ¬¡å†™å…¥æ—¶è‡ªåŠ¨åˆ›å»ºæ–‡ä»¶ã€‚

**å†…ç½®é»˜è®¤å€¼**:
```python
priorities = ["P0", "P1", "P2", "P3"]
statuses   = ["pending", "in_progress", "planned", "fixed", "n_a"]
github_comment_template = "è‡ªåŠ¨åŒæ­¥: {issue_id} å·²ä¿®å¤"
```

### 4.8 ç®¡ç†èœå• (UI) ä¸é¡¹ç›®å¼•å¯¼ (ProjectInit)

**ui.py â€” `iss-ui`**:
- å¯åœ¨ä»»æ„ç›®å½•è¿è¡Œçš„å…¨å±€ç®¡ç†å…¥å£
- åŠŸèƒ½: æŸ¥çœ‹è·¯å¾„ã€ç¼–è¾‘å…¨å±€é…ç½®ã€æŸ¥çœ‹/å¤‡ä»½/æ¢å¤é¡¹ç›®ã€æ£€æŸ¥ GitHub ç™»å½•ã€ç»‘å®šä»“åº“
- å½“ `cwd` ä¸­å­˜åœ¨ `issue-tracker.yaml` æ—¶ï¼ŒåŠ¨æ€è¿½åŠ "å½“å‰é¡¹ç›®é…ç½®"ç¼–è¾‘å…¥å£

**project_init.py â€” `iss-project`**:
- åœ¨é¡¹ç›®ç›®å½•ä¸‹è¿è¡Œ
- ç›®å½•æ— é…ç½® â†’ å¼•å¯¼å¼åˆ›å»ºæµç¨‹ï¼ˆé€å­—æ®µè¾“å…¥ â†’ é¢„è§ˆ â†’ ç¡®è®¤å†™å…¥ï¼‰
- ç›®å½•æœ‰é…ç½® â†’ ç¼–è¾‘èœå•ï¼ˆæŸ¥çœ‹/ä¿®æ”¹é¡¹ç›®ä¿¡æ¯ã€ä¼˜å…ˆçº§ã€çŠ¶æ€ã€GitHubã€å¯¼å‡ºï¼‰
- ä¿ç•™ `render_yaml()` / `load_yaml()` / `save_config()` ä¸ºå…¬å¼€æ¥å£ï¼Œ`ui.py` å¤ç”¨

---

## 5. CLI å‘½ä»¤è®¾è®¡

### 5.1 å‘½ä»¤åˆ—è¡¨

| å‘½ä»¤ | åŠŸèƒ½ | å…³é”®å‚æ•° |
|------|------|---------|
| `add` | æ–°å¢é—®é¢˜ | `--title`, `--priority`, `--id` |
| `update` | æ›´æ–°å­—æ®µ | `--status`, `--fix-date`, `--actual-hours` |
| `query` | å¤šæ¡ä»¶æŸ¥è¯¢ | `--priority`, `--status`, `--file`, `--detail` |
| `list` | ç®€æ´åˆ—è¡¨ | `--status`, `--priority` |
| `stats` | ç»Ÿè®¡æ¦‚è§ˆ | æ—  |
| `export` | ç”Ÿæˆ MD | `--output` |
| `sync` | GitHub åŒæ­¥ | `--dry-run` |
| `migrate` | å¯¼å…¥æ•°æ® | `--source`, `--migrator`, `--force` |

### 5.2 é¡¹ç›®åˆ‡æ¢

```bash
# é€šè¿‡ project_id åˆ‡æ¢
issue-tracker -p 001 stats
issue-tracker -p 002 query --status pending

# æ‰‹åŠ¨æŒ‡å®šé…ç½®æ–‡ä»¶
issue-tracker -c /path/to/config.yaml query
```

### 5.3 ç”¨æ³•ç¤ºä¾‹

```bash
# æ–°å¢é—®é¢˜ï¼ˆç¼–å·è‡ªåŠ¨åˆ†é…ï¼‰
issue-tracker -p 001 add \
    --title "ç¤ºä¾‹é—®é¢˜" \
    --priority P2 \
    --file "src/test.cpp"

# æ›´æ–°çŠ¶æ€
issue-tracker -p 001 update 001 --status fixed --fix-date 2026-02-04

# æŸ¥è¯¢
issue-tracker -p 001 query --priority P2 --status pending --detail

# ç»Ÿè®¡
issue-tracker -p 001 stats

# å¯¼å‡º
issue-tracker -p 001 export

# GitHub åŒæ­¥é¢„è§ˆ
issue-tracker -p 001 sync --dry-run

# è¿ç§»å¯¼å…¥ï¼ˆç¼–å·è‡ªåŠ¨é‡åˆ†é…ï¼‰
issue-tracker -p 001 migrate \
    --source all-issues.md \
    --migrator weldsmart
```

---

## 6. é€šç”¨åŒ–è®¾è®¡

### 6.1 é€šç”¨ vs é¡¹ç›®ç‰¹å®š

| ç»„æˆéƒ¨åˆ† | æ˜¯å¦é€šç”¨ | å¤„ç†æ–¹å¼ |
|---------|---------|---------|
| æ ¸å¿ƒè¡¨ç»“æ„ | âœ… é€šç”¨ | ç›´æ¥ç”¨ |
| CLI å‘½ä»¤é›† | âœ… é€šç”¨ | ç›´æ¥ç”¨ |
| GitHub åŒæ­¥é€»è¾‘ | âœ… é€šç”¨ | ç›´æ¥ç”¨ |
| é¡¹ç›®ç¼–å· | âŒ é¡¹ç›®ç‰¹å®š | é…ç½®æ–‡ä»¶ |
| ä¼˜å…ˆçº§æšä¸¾ | âŒ é¡¹ç›®ç‰¹å®š | é…ç½®æ–‡ä»¶ |
| çŠ¶æ€æšä¸¾ | âŒ é¡¹ç›®ç‰¹å®š | é…ç½®æ–‡ä»¶ |
| è¿ç§»è„šæœ¬ | âŒ é¡¹ç›®ç‰¹å®š | migrator æ’ä»¶ |
| Export æ ¼å¼ | âŒ é¡¹ç›®ç‰¹å®š | å‚æ•°åŒ– |

### 6.2 æ–°é¡¹ç›®æ¥å…¥æ­¥éª¤

1. **åˆ›å»ºé…ç½®æ–‡ä»¶**: åœ¨ `$XDG_CONFIG_HOME/issue-tracker/` åˆ›å»º `{project_id}_{name}.yaml`ï¼Œæˆ–åœ¨é¡¹ç›®ç›®å½•åˆ›å»º `issue-tracker.yaml`
2. **é…ç½®é¡¹ç›®å‚æ•°**: ä¿®æ”¹ `project.id`, `project.name`, `priorities`, `statuses`
3. **å®ç° Migrator æ’ä»¶**: ç»§æ‰¿ `BaseMigrator` è§£æé¡¹ç›®ç‰¹å®šæ ¼å¼
4. **éªŒè¯**: `issue-tracker -p {project_id} migrate --dry-run`

---

## 7. æ•°æ®æµä¸åŒæ­¥ç­–ç•¥

### 7.1 MD â†” DB åŒå‘åŒæ­¥

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         $XDG_DATA_HOME/issue-tracker                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ exports/        â”‚         â”‚ data/                â”‚  â”‚
â”‚  â”‚ issues.md       â”‚         â”‚ {project_id}_*.db    â”‚  â”‚
â”‚  â”‚ (Git æŒä¹…åŒ–)    â”‚         â”‚ (æœ¬åœ°å·¥ä½œç¯å¢ƒ)        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚         â–²                            â–²                 â”‚
â”‚         â”‚                            â”‚                 â”‚
â”‚         â”‚ export                    â”‚ migrate          â”‚
â”‚         â”‚                            â”‚                 â”‚
â”‚    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”            â”‚
â”‚    â”‚         Issue Tracker CLI          â”‚            â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7.2 GitHub å•å‘åŒæ­¥

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     status=fixed      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æœ¬åœ° DB    â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  â”‚ GitHub Issueâ”‚
â”‚  (issues.db)â”‚   gh issue close     â”‚    (è¿œç¨‹)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                                    â”‚
       â”‚ è®°å½•åŒæ­¥æ—¥å¿—                        â”‚ å·²å…³é—­
       â–¼                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ github_sync_log â”‚              â”‚   Closed    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 8. æµ‹è¯•ç­–ç•¥

### 8.1 å•å…ƒæµ‹è¯•è¦†ç›–

| æµ‹è¯•ç±» | è¦†ç›–èŒƒå›´ | ç”¨ä¾‹æ•° |
|--------|---------|--------|
| `TestConfig` | é…ç½®åŠ è½½æ ¡éªŒã€ID æ ¼å¼æ¸²æŸ“ | 6 |
| `TestDatabaseCRUD` | æ•°æ®åº“å¢åˆ æ”¹æŸ¥ã€upsert | 11 |
| `TestDatabaseAutoId` | è‡ªåŠ¨ç¼–å·åˆ†é…é€»è¾‘ | 6 |
| `TestDatabaseQuery` | æŸ¥è¯¢è¿‡æ»¤ï¼ˆå« globï¼‰ | 6 |
| `TestDatabaseStats` | ç»Ÿè®¡èšåˆ | 3 |
| `TestWeldSmartMigrator` | MD è§£æã€å¤šçŠ¶æ€ã€å¤šæ–‡ä»¶ã€æ ¡éªŒ | 8 |
| `TestExporter` | Markdown ç”Ÿæˆã€ç¼–å·è§„åˆ™ | 6 |
| `TestGithubSync` | GitHub åŒæ­¥ (mock) | 5 |
| `TestGithubSyncQuery` | åŒæ­¥æŸ¥è¯¢æ¡ä»¶ | 4 |
| **æ€»è®¡** | | **55** |

### 8.2 è¿è¡Œæµ‹è¯•

```bash
cd /path/to/issue-tracker-cli
python3 -m unittest discover -s tests -v
```

### 8.3 é›†æˆéªŒè¯

```bash
# 1. è¿ç§»å¯¼å…¥
issue-tracker -p 001 migrate --source all-issues.md --migrator weldsmart

# 2. ç»Ÿè®¡éªŒè¯
issue-tracker -p 001 stats

# 3. æŸ¥è¯¢éªŒè¯
issue-tracker -p 001 query --status pending

# 4. å¯¼å‡ºéªŒè¯
issue-tracker -p 001 export --output /tmp/test-export.md

# 5. sqlite3 ç›´æ¥è®¿é—®
sqlite3 ~/issue-tracker-cli/data/001_*.db "SELECT * FROM v_pending;"
```

---

## 9. æ€§èƒ½è€ƒè™‘

### 9.1 æ•°æ®åº“è§„æ¨¡

- é¢„æœŸè§„æ¨¡: < 10,000 æ¡/é¡¹ç›®
- å•æ¡è®°å½•: ~500 bytes (å«æè¿°æ–‡æœ¬)
- æ•°æ®åº“å¤§å°: < 5 MB

### 9.2 æŸ¥è¯¢ä¼˜åŒ–

- ç´¢å¼•: `priority`, `status`, `discovery_date`, `github_issue_id`
- è§†å›¾: `v_pending` å¸¸ç”¨æŸ¥è¯¢é¢„å®šä¹‰
- glob åŒ¹é…: ä½¿ç”¨ SQL `GLOB` è€Œé Python åè¿‡æ»¤

### 9.3 å®æ—¶æ€§è¦æ±‚

- æ‰€æœ‰æ“ä½œ: < 100ms (åƒæ¡è§„æ¨¡)
- å¯¼å‡ºæ“ä½œ: < 500ms
- ä¸éœ€è¦è¿æ¥æ±  (å•çº¿ç¨‹ CLI)

---

## 10. å®‰å…¨è€ƒè™‘

### 10.1 SQL æ³¨å…¥é˜²æŠ¤

- ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢ (`?` å ä½ç¬¦)
- ä¸æ‹¼æ¥ SQL å­—ç¬¦ä¸²

### 10.2 æ–‡ä»¶æ“ä½œ

- æ•°æ®åº“å†™å…¥å‰æ ¡éªŒè·¯å¾„
- å¯¼å‡ºæ–‡ä»¶è·¯å¾„å¯é…ç½®

### 10.3 GitHub åŒæ­¥

- ä»… `close` æ“ä½œï¼Œä¸åˆ›å»º/ä¿®æ”¹ Issue
- å¤±è´¥è®°å½•æ—¥å¿—ï¼Œä¸é‡è¯•é¿å…è¯¯æ“ä½œ

---

## 11. æ‰©å±•ç‚¹

### 11.1 æ–°å¢ Migrator

```python
# migrators/custom_migrator.py
from . import BaseMigrator

class CustomMigrator(BaseMigrator):
    def parse(self, source_path: str) -> list[dict]:
        # å®ç°é¡¹ç›®ç‰¹å®šè§£æé€»è¾‘
        ...
```

### 11.2 è‡ªå®šä¹‰å¯¼å‡ºæ ¼å¼

ç»§æ‰¿ `Exporter` å¹¶è¦†ç›– `export()` æ–¹æ³•ã€‚

### 11.3 æ–°å¢å‘½ä»¤

åœ¨ `cli.py` ä¸­æ·»åŠ æ–°çš„å‘½ä»¤å¤„ç†å‡½æ•°å’Œ `argparse` å­è§£æå™¨ã€‚

---

## 12. ä¾èµ–æ¸…å•

### 12.1 Python ä¾èµ–

```
PyYAML>=6.0
```

### 12.2 å¤–éƒ¨å·¥å…·ä¾èµ–

```
gh (GitHub CLI) - ç”¨äº GitHub åŒæ­¥åŠŸèƒ½
sqlite3 (å¯é€‰) - ç”¨äºç›´æ¥å‘½ä»¤è¡Œè®¿é—®æ•°æ®åº“
```

### 12.3 Python ç‰ˆæœ¬

- **æœ€ä½**: Python 3.10
- **æ¨è**: Python 3.11+

---

## 13. ç¯å¢ƒå˜é‡

éµå¾ª [XDG Base Directory Specification](https://specifications.freedesktop.org/basedir-spec/latest/)ã€‚

| ç¯å¢ƒå˜é‡ | è¯´æ˜ | é»˜è®¤å€¼ |
|---------|------|--------|
| `XDG_CONFIG_HOME` | é…ç½®æ–‡ä»¶ç›®å½•åŸºè·¯å¾„ | `~/.config` |
| `XDG_DATA_HOME` | æ•°æ®å­˜å‚¨ç›®å½•åŸºè·¯å¾„ | `~/.local/share` |

å·¥å…·åœ¨ä¸¤è€…ä¸‹åˆ†åˆ«åˆ›å»º `issue-tracker/` å­ç›®å½•ã€‚å…·ä½“æ˜ å°„è§ [4.6 è·¯å¾„ç®¡ç†](#46-è·¯å¾„ç®¡ç†-paths)ã€‚

---

## 14. UI äº¤äº’å‡çº§è§„åˆ’

è¯¦ç»†è®¾è®¡è§„èŒƒè§ [`docs/UIäº¤äº’è®¾è®¡.md`](UIäº¤äº’è®¾è®¡.md)ã€‚æœ¬èŠ‚ä¸ºæ¦‚è¦ã€‚

### 14.1 ç›®æ ‡

1. å…¨éƒ¨èœå•å’Œä¿¡æ¯å±•ç¤ºåŠ å…¥ ANSI é…è‰²ï¼Œé‡ç‚¹å…ƒç´ çªå‡º
2. èœå•é€‰æ‹©æ”¹ä¸º â†‘â†“ æ–¹å‘é”® + Enter ç¡®è®¤ + Esc å›é€€ï¼ˆä¸»é¡µ Esc é€€å‡ºï¼‰
3. æ˜¯/å¦ç¡®è®¤æ”¹ä¸º â†â†’ æ–¹å‘é”®åˆ‡æ¢
4. ç¼–è¾‘é…ç½®åæä¾› **æäº¤ / å–æ¶ˆ** é€‰æ‹©ï¼ˆå˜æ›´ä¸ç«‹å³å†™ç›˜ï¼‰

### 14.2 æ–°å¢æ¨¡å—

`core/terminal.py` â€” ç»ˆç«¯å·¥å…·æ¨¡å—ï¼Œä»…ä¾èµ– stdlibï¼ˆ`termios`/`tty`/`select`ï¼‰ã€‚æ ¸å¿ƒç»„ä»¶ï¼š

| ç»„ä»¶ | è¯´æ˜ |
|------|------|
| `C` ç±» + `c()` | ANSI å¸¸é‡ä¸ç€è‰²å‡½æ•°ï¼Œé TTY é™é»˜è·³è¿‡ |
| `Key` ç±» + `getch()` | é”®åå¸¸é‡ + raw å•é”®è¯»å–ï¼ˆCSI åºåˆ—è§£æï¼‰ |
| `menu()` | ç®­å¤´é”®èœå•ï¼Œæ”¯æŒåˆ†éš”è¡Œå’Œè‡ªå®šä¹‰é¡¹é¢œè‰² |
| `yes_no()` | â†â†’ åˆ‡æ¢ç¡®è®¤ï¼ŒEsc å–æ¶ˆ |
| `input_line()` | å½©è‰² prompt + ç³»ç»Ÿ `input()`ï¼ˆIME å…¼å®¹ï¼‰ |

### 14.3 Submit/Cancel æ¨¡å¼

ç¼–è¾‘å­èœå•å¯¹ data åš deep copy ä½œä¸º working copyï¼Œä¿®æ”¹ä¸å†™ç›˜ã€‚èœå•åº•éƒ¨è¿½åŠ  `âœ“ æäº¤ä¿å­˜` / `âœ— å–æ¶ˆ`ï¼Œæäº¤æ—¶å†™ç›˜è¿”å›ä¸Šå±‚ï¼Œå–æ¶ˆæ—¶ä¸¢å¼ƒè¿”å›ã€‚æœ‰æœªä¿å­˜å˜æ›´æ—¶æ ‡é¢˜é™„åŠ  ` â—`ã€‚

é€‚ç”¨èŒƒå›´ï¼š`_global_config_menu`ï¼ˆui.pyï¼‰ã€`edit_menu` + `_edit_github`ï¼ˆproject_init.pyï¼‰ã€‚

---

## 15. é™„å½•

### 15.1 æ–‡ä»¶æ¸…å•

```
src/issue_tracker/
â”œâ”€â”€ __init__.py
â”œâ”€â”€ __version__.py          # ç‰ˆæœ¬ä¿¡æ¯
â”œâ”€â”€ cli.py                  # CLI å…¥å£ (issue-tracker å‘½ä»¤)
â”œâ”€â”€ ui.py                   # iss-ui å…¨å±€ç®¡ç†èœå•
â”œâ”€â”€ project_init.py         # iss-project å¼•å¯¼åˆ›å»ºä¸ç¼–è¾‘
â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ config.py           # é…ç½®åŠ è½½ä¸æ ¡éªŒ
â”‚   â”œâ”€â”€ database.py         # SQLite CRUD å°è£…
â”‚   â”œâ”€â”€ model.py            # Issue æ•°æ®ç±»
â”‚   â”œâ”€â”€ exporter.py         # Markdown å¯¼å‡ºå™¨
â”‚   â”œâ”€â”€ github_sync.py      # GitHub åŒæ­¥ (gh CLI)
â”‚   â”œâ”€â”€ global_config.py    # å…¨å±€é…ç½® (globals.yaml)
â”‚   â””â”€â”€ paths.py            # XDG è·¯å¾„è§£æä¸ç›®å½•ç®¡ç†
â”œâ”€â”€ migrators/
â”‚   â”œâ”€â”€ __init__.py         # BaseMigrator æŠ½è±¡åŸºç±»
â”‚   â””â”€â”€ weldsmart_migrator.py  # WeldSmart æ ¼å¼è§£æå™¨
tests/
â””â”€â”€ test_issue_manager.py   # å•å…ƒæµ‹è¯• (55 ç”¨ä¾‹)

docs/
â”œâ”€â”€ æŠ€æœ¯è®¾è®¡æ–¹æ¡ˆ.md          # æœ¬æ–‡ä»¶ â€” ç³»ç»Ÿæ¶æ„è®¾è®¡
â”œâ”€â”€ ä½¿ç”¨æŒ‡å¯¼.md             # ç”¨æˆ·æ‰‹å†Œ
â””â”€â”€ UIäº¤äº’è®¾è®¡.md           # iss-ui / iss-project äº¤äº’å±‚è®¾è®¡è§„èŒƒ
```

### 15.2 ç‰ˆæœ¬å†å²

| ç‰ˆæœ¬ | æ—¥æœŸ | å˜æ›´ |
|------|------|------|
| 2.2 | 2026-02-05 | UI äº¤äº’å‡çº§: æ–¹å‘é”®èœå•ã€â†â†’ æ˜¯/å¦åˆ‡æ¢ã€Submit/Cancel ç¼–è¾‘æ¨¡å¼ã€ANSI é…è‰²ï¼ˆ`core/terminal.py`ï¼‰ |
| 2.1 | 2026-02-05 | å¼•å¯¼å¼é¡¹ç›®é…ç½® (`iss-project`)ã€å…¨å±€ç®¡ç†èœå• (`iss-ui`)ã€XDG ç›®å½•ç»“æ„ã€å¤‡ä»½/æ¢å¤ã€å…¨å±€é…ç½® |
| 2.0 | 2026-02-04 | å¤šé¡¹ç›®æ”¯æŒï¼Œå…¨å±€è‡ªåŠ¨é€’å¢ç¼–å· |
| 1.0 | 2026-02-03 | åˆå§‹ç‰ˆæœ¬ï¼Œæ”¯æŒ WeldSmart Pro |

---

**æ–‡æ¡£ç»“æŸ**
