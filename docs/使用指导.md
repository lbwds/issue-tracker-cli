# Issue Tracker CLI - ä½¿ç”¨æŒ‡å¯¼

> **ç‰ˆæœ¬**: 2.0
> **æ—¥æœŸ**: 2026-02-04
> **é€‚ç”¨äº**: æ”¯æŒå¤šé¡¹ç›®çš„é€šç”¨ Issue è¿½è¸ªå·¥å…·

---

## ç›®å½•

1. [å¿«é€Ÿå¼€å§‹](#1-å¿«é€Ÿå¼€å§‹)
   - [å‡çº§](#12-å‡çº§)
   - [å¸è½½](#13-å¸è½½)
2. [å‘½ä»¤è¯¦è§£](#2-å‘½ä»¤è¯¦è§£)
3. [æ—¥å¸¸å·¥ä½œæµ](#3-æ—¥å¸¸å·¥ä½œæµ)
4. [é«˜çº§ç”¨æ³•](#4-é«˜çº§ç”¨æ³•)
5. [æ•…éšœæ’æŸ¥](#5-æ•…éšœæ’æŸ¥)
6. [æ–°é¡¹ç›®æ¥å…¥æŒ‡å—](#6-æ–°é¡¹ç›®æ¥å…¥æŒ‡å—)

---

## 1. å¿«é€Ÿå¼€å§‹

### 1.1 å®‰è£…

```bash
# ä» PyPI å®‰è£…ï¼ˆæ¨èï¼‰
pip install issue-tracker-cli

# æˆ–ä» GitHub å®‰è£…
pip install git+https://github.com/lbwds/issue-tracker-cli.git@v2.0.1
```

å®‰è£…å®Œæˆåï¼Œé¦–æ¬¡è¿è¡Œä»»ä½•å‘½ä»¤æ—¶ä¼šè‡ªåŠ¨åˆ›å»ºæ•°æ®å­˜å‚¨ç›®å½•ï¼š

```bash
# é¦–æ¬¡è¿è¡Œï¼ˆè‡ªåŠ¨åˆ›å»ºç›®å½•ï¼‰
issue-tracker --help
```

åˆ›å»ºçš„ç›®å½•ç»“æ„ï¼ˆéµå¾ª [XDG Base Directory Specification](https://specifications.freedesktop.org/basedir-spec/latest/)ï¼‰ï¼š
```
~/.config/issue-tracker/              # $XDG_CONFIG_HOME/issue-tracker  â€” é¡¹ç›®é…ç½®
~/.local/share/issue-tracker/         # $XDG_DATA_HOME/issue-tracker   â€” æ•°æ®åº“
~/.local/share/issue-tracker/exports/ #                                â€” å¯¼å‡ºæ–‡ä»¶
```

å¯é€šè¿‡æ ‡å‡† XDG ç¯å¢ƒå˜é‡è‡ªå®šä¹‰ä½ç½®ï¼š
```bash
export XDG_CONFIG_HOME=/custom/config   # é…ç½®ç›®å½•ï¼Œé»˜è®¤ ~/.config
export XDG_DATA_HOME=/custom/data       # æ•°æ®ç›®å½•ï¼Œé»˜è®¤ ~/.local/share
```

### 1.2 å‡çº§

```bash
# ä» GitHub å‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬ï¼ˆæ›¿æ¢ @vX.Y.Z ä¸ºç›®æ ‡ç‰ˆæœ¬ï¼‰
pip install --upgrade git+https://github.com/lbwds/issue-tracker-cli.git@v2.0.1
```

æ•°æ®ç›®å½•å’Œé…ç½®æ–‡ä»¶ä¸å—å½±å“ï¼Œå‡çº§åå¯ç›´æ¥ä½¿ç”¨ã€‚

### 1.3 å¸è½½

å¸è½½åˆ†ä¸¤æ­¥ï¼šç§»é™¤å·¥å…·åŒ…æœ¬èº«ï¼Œå’Œåˆ é™¤æ•°æ®ç›®å½•ã€‚

**ç¬¬ä¸€æ­¥ï¼šå¸è£… pip åŒ…**

```bash
pip uninstall issue-tracker-cli -y
```

**ç¬¬äºŒæ­¥ï¼šåˆ é™¤æ•°æ®ç›®å½•**

åˆ é™¤é…ç½®å’Œæ•°æ®ç›®å½•ï¼š

```bash
# é»˜è®¤è·¯å¾„
rm -rf ~/.config/issue-tracker
rm -rf ~/.local/share/issue-tracker

# å¦‚æœæ›¾è‡ªå®šä¹‰è¿‡ XDG_CONFIG_HOME / XDG_DATA_HOMEï¼Œä½¿ç”¨å¯¹åº”è·¯å¾„
rm -rf "$XDG_CONFIG_HOME/issue-tracker"
rm -rf "$XDG_DATA_HOME/issue-tracker"
```

> **æ³¨æ„**ï¼šå¦‚æœå¸Œæœ›ä¿ç•™æ•°æ®ï¼Œåœ¨åˆ é™¤å‰è‡ªè¡Œå¤‡ä»½ `~/.local/share/issue-tracker/` ç›®å½•ã€‚

---

### 1.4 æ¨èæ–¹å¼ï¼šé¡¹ç›®ç›®å½•é…ç½®

åœ¨é¡¹ç›®æ ¹ç›®å½•ä½¿ç”¨ `iss-project` å¼•å¯¼åˆ›å»ºé…ç½®æ–‡ä»¶ `issue-tracker.yaml`ï¼š

```bash
cd /path/to/your/project
iss-project
# æŒ‰æç¤ºä¾æ¬¡è¾“å…¥: é¡¹ç›® IDã€åç§°ã€ä¼˜å…ˆçº§ã€çŠ¶æ€ã€GitHub é…ç½®ã€å¯¼å‡ºè·¯å¾„
# ç¡®è®¤åè‡ªåŠ¨å†™å…¥ issue-tracker.yaml
```

ä¹Ÿå¯ä½¿ç”¨ `iss-ui` ç®¡ç†å…¨å±€é…ç½®å’Œé¡¹ç›®ï¼š

```bash
iss-ui   # æ‰“å¼€èœå•ï¼Œå¯æŸ¥çœ‹è·¯å¾„ã€ç¼–è¾‘å…¨å±€é…ç½®ã€å¤‡ä»½/æ¢å¤é¡¹ç›®ç­‰
```

ç„¶åç›´æ¥åœ¨é¡¹ç›®ç›®å½•ä¸­ä½¿ç”¨å‘½ä»¤ï¼š

```bash
# æ–°å¢é—®é¢˜ï¼ˆç¼–å·è‡ªåŠ¨åˆ†é…ï¼‰
issue-tracker add --title "ç™»å½•åŠŸèƒ½å¼‚å¸¸" --priority P0 --description "ç”¨æˆ·æ— æ³•æ­£å¸¸ç™»å½•"

# æŸ¥çœ‹ç»Ÿè®¡
issue-tracker stats

# æŸ¥è¯¢å¾…å¤„ç†é—®é¢˜
issue-tracker query --status pending
```

**ä¼˜åŠ¿**ï¼šæ— éœ€æ¯æ¬¡æŒ‡å®š `-p` å‚æ•°ï¼Œåœ¨é¡¹ç›®ç›®å½•ä¸­ç›´æ¥ä½¿ç”¨å³å¯ã€‚

---

### 1.5 å…¶ä»–ä½¿ç”¨æ–¹å¼

#### æ–¹å¼ A: ä½¿ç”¨ `-p` å‚æ•°ç®¡ç†å¤šä¸ªé¡¹ç›®

```bash
# é…ç½®ç›®å½•é»˜è®¤ä¸º ~/.config/issue-tracker/ï¼Œé¦–æ¬¡è¿è¡Œä¼šè‡ªåŠ¨åˆ›å»º

# åˆ›å»ºé¡¹ç›®é…ç½®ï¼ˆæ–‡ä»¶åæ ¼å¼: {project_id}_{name}.yamlï¼‰
cat > ~/.config/issue-tracker/001_ProjectA.yaml << 'EOF'
project:
  id: "001"
  name: "ProjectA"
...
EOF

# ä½¿ç”¨ -p å‚æ•°åˆ‡æ¢é¡¹ç›®
issue-tracker -p 001 add --title "..." --priority P2
issue-tracker -p 002 add --title "..." --priority P1
```

#### æ–¹å¼ B: ä½¿ç”¨ `-c` å‚æ•°æŒ‡å®šé…ç½®è·¯å¾„

```bash
issue-tracker -c /path/to/config.yaml add --title "..." --priority P2
```

---

### 1.6 é…ç½®æ–‡ä»¶æŸ¥æ‰¾é€»è¾‘

å·¥å…·æŒ‰ä»¥ä¸‹ä¼˜å…ˆçº§æŸ¥æ‰¾é…ç½®æ–‡ä»¶ï¼š

```
1. -c <config> å‚æ•°         â†’ ç›´æ¥ä½¿ç”¨æŒ‡å®šè·¯å¾„
2. -p <project_id> å‚æ•°     â†’ æœç´¢ $XDG_CONFIG_HOME/issue-tracker/{project_id}_*.yaml
3. (æ— å‚æ•°) è‡ªåŠ¨æŸ¥æ‰¾:
   a) å½“å‰ç›®å½•/issue-tracker.yaml         â†’ æ¨èæ–¹å¼ï¼Œé€‚åˆå•é¡¹ç›®ä½¿ç”¨
   b) $XDG_CONFIG_HOME/issue-tracker/ å”¯ä¸€é…ç½®æ–‡ä»¶  â†’ å¤šé¡¹ç›®æ—¶è‡ªåŠ¨ä½¿ç”¨å”¯ä¸€é…ç½®
```

---

## 2. å‘½ä»¤è¯¦è§£

### 2.1 é¡¹ç›®åˆ‡æ¢

```bash
# é€šè¿‡ project_id åˆ‡æ¢
issue-tracker -p 001 stats
issue-tracker -p 002 query

# æ‰‹åŠ¨æŒ‡å®šé…ç½®æ–‡ä»¶
issue-tracker -c /path/to/config.yaml query
```

### 2.2 add - æ–°å¢é—®é¢˜

**è¯­æ³•**:
```bash
issue-tracker [-p PROJECT_ID] add \
    [--id <ç¼–å·>] \
    --title "<æ ‡é¢˜>" \
    --priority <ä¼˜å…ˆçº§> \
    [--status <çŠ¶æ€>] \
    [--discovery-date <æ—¥æœŸ>] \
    [--file "<è·¯å¾„>"] \
    [--location "<ä½ç½®>"] \
    [--description "<æè¿°>"] \
    [--impact "<å½±å“>"] \
    [--fix-plan "<æ–¹æ¡ˆ>"] \
    [--estimated-hours <å°æ—¶>] \
    [--phase <é˜¶æ®µ>] \
    [--github-issue-id <ç¼–å·>]
```

**å‚æ•°è¯´æ˜**:

| å‚æ•° | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|------|
| `-p PROJECT_ID` | âŒ | é¡¹ç›®ç¼–å· | `001` |
| `--id` | âŒ | é—®é¢˜ç¼–å·ï¼ˆçº¯æ•°å­—ï¼Œé»˜è®¤è‡ªåŠ¨åˆ†é…ï¼‰ | `001` |
| `--title` | âœ… | é—®é¢˜æ ‡é¢˜ | `"å†…å­˜æ³„æ¼é£é™©"` |
| `--priority` | âœ… | ä¼˜å…ˆçº§ (P0/P1/P2/P3) | `P2` |
| `--status` | âŒ | çŠ¶æ€ | é»˜è®¤ `pending` |
| `--discovery-date` | âŒ | å‘ç°æ—¥æœŸ | é»˜è®¤ä»Šå¤© |
| `--file` | âŒ | æ–‡ä»¶è·¯å¾„ | `"src/core/test.cpp"` |
| `--location` | âŒ | ä½ç½®æè¿° | `"è¡Œ 10-15"` |
| `--description` | âŒ | é—®é¢˜æè¿° | |
| `--impact` | âŒ | å½±å“ | |
| `--fix-plan` | âŒ | ä¿®å¤æ–¹æ¡ˆ | |
| `--estimated-hours` | âŒ | é¢„è®¡å·¥æ—¶ | `2.5` |
| `--actual-hours` | âŒ | å®é™…å·¥æ—¶ | `2.0` |
| `--phase` | âŒ | æ‰€å±é˜¶æ®µ | `phase3` |
| `--github-issue-id` | âŒ | GitHub Issue ç¼–å· | `123` |

**ç¤ºä¾‹**:
```bash
# æ–°å¢ Medium ä¼˜å…ˆçº§é—®é¢˜ï¼ˆç¼–å·è‡ªåŠ¨åˆ†é…ï¼‰
issue-tracker -p 001 add \
    --title "å‡½æ•°å‚æ•°æ ¡éªŒç¼ºå¤±" \
    --priority P2 \
    --file "src/core/Config.cpp" \
    --location "è¡Œ 100" \
    --description "ç¼ºå°‘å¯¹ç©ºæŒ‡é’ˆçš„æ£€æŸ¥" \
    --estimated-hours 1

# æ‰‹åŠ¨æŒ‡å®šç¼–å·
issue-tracker -p 001 add \
    --id 999 \
    --title "ç‰¹æ®Šç¼–å·é—®é¢˜" \
    --priority P3
```

### 2.3 update - æ›´æ–°é—®é¢˜

**è¯­æ³•**:
```bash
issue-tracker [-p PROJECT_ID] update <ç¼–å·> \
    [--title "<æ–°æ ‡é¢˜>"] \
    [--priority <ä¼˜å…ˆçº§>] \
    [--status <çŠ¶æ€>] \
    [--fix-date <æ—¥æœŸ>] \
    [--actual-hours <å°æ—¶>] \
    [--github-issue-id <ç¼–å·>] \
    ...
```

**å¸¸ç”¨æ›´æ–°åœºæ™¯**:

```bash
# æ ‡è®°ä¸ºå·²ä¿®å¤
issue-tracker -p 001 update 001 \
    --status fixed \
    --fix-date 2026-02-04 \
    --actual-hours 1.5

# å…³è” GitHub Issue
issue-tracker -p 001 update 001 --github-issue-id 456

# æ›´æ–°æ ‡é¢˜å’Œæè¿°
issue-tracker -p 001 update 001 \
    --title "æ›´å‡†ç¡®çš„æ ‡é¢˜" \
    --description "æ›´è¯¦ç»†çš„æè¿°"
```

### 2.4 query - å¤šæ¡ä»¶æŸ¥è¯¢

**è¯­æ³•**:
```bash
issue-tracker [-p PROJECT_ID] query \
    [--id <ç¼–å·>] \
    [--priority <ä¼˜å…ˆçº§>] \
    [--status <çŠ¶æ€>] \
    [--phase <é˜¶æ®µ>] \
    [--file <globæ¨¡å¼>] \
    [--github <Issueç¼–å·>] \
    [--detail]
```

**ç¤ºä¾‹**:

```bash
# æŸ¥è¯¢æ‰€æœ‰ P2 å¾…ä¿®å¤é—®é¢˜
issue-tracker -p 001 query --priority P2 --status pending

# æŸ¥è¯¢æŸæ–‡ä»¶ç›¸å…³é—®é¢˜
issue-tracker -p 001 query --file "src/hal/*"

# æŸ¥è¯¢æŸ GitHub Issue å…³è”çš„æœ¬åœ°é—®é¢˜
issue-tracker -p 001 query --github 456

# è¯¦ç»†æ¨¡å¼ï¼ˆå±•å¼€æè¿°ï¼‰
issue-tracker -p 001 query --id 001 --detail

# ç»„åˆæŸ¥è¯¢
issue-tracker -p 001 query --priority P0 --status pending --detail
```

### 2.5 list - ç®€æ´åˆ—è¡¨

**è¯­æ³•**:
```bash
issue-tracker [-p PROJECT_ID] list \
    [--status <çŠ¶æ€>] \
    [--priority <ä¼˜å…ˆçº§>]
```

**è¾“å‡ºæ ¼å¼**:
```
  ç¼–å·     é—®é¢˜æè¿°                                                ä¼˜å…ˆçº§     å‘ç°æ—¥æœŸ          çŠ¶æ€
  -----  --------------------------------------------------  ------  ------------  --------
  001    SystemStateMachine::saveState ä½¿ç”¨ system() æ‰§è¡Œ mkd..  P2      ä»Šå¤©          âŒ å¾…ä¿®å¤
  002    RecipeData::fromJson æšä¸¾å€¼ static_cast æ— èŒƒå›´æ ¡éªŒ          P2      2026-02-01    âŒ å¾…ä¿®å¤
```

### 2.6 stats - ç»Ÿè®¡æ¦‚è§ˆ

**è¯­æ³•**:
```bash
issue-tracker [-p PROJECT_ID] stats
```

**è¾“å‡ºç¤ºä¾‹**:
```
==================================================
  MyProject - é—®é¢˜ç»Ÿè®¡
==================================================
  æ€»æ•°: 132

  æŒ‰ä¼˜å…ˆçº§:
  ä¼˜å…ˆçº§           æ€»æ•°    å·²ä¿®å¤    å¾…å¤„ç†     è¿›åº¦
  ---------- ----- ------ ------ ------
  P0            23     23      0   100%
  P1            26     26      0   100%
  P2            45     39      5    86%
  P3            38     27     11    71%

  æŒ‰çŠ¶æ€:
    fixed            115  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
    pending           11  â–ˆâ–ˆ
    planned            4
    in_progress        1
    n_a                1
==================================================
```

### 2.7 export - ç”Ÿæˆ Markdown

**è¯­æ³•**:
```bash
issue-tracker [-p PROJECT_ID] export [--output <è·¯å¾„>]
```

**é»˜è®¤è¾“å‡º**: `$XDG_DATA_HOME/issue-tracker/exports/xxx.md`ï¼ˆé…ç½®æ–‡ä»¶ä¸­æŒ‡å®šï¼‰

**ç¤ºä¾‹**:
```bash
# å¯¼å‡ºåˆ°é»˜è®¤ä½ç½®
issue-tracker -p 001 export

# å¯¼å‡ºåˆ°æŒ‡å®šä½ç½®
issue-tracker -p 001 export --output /tmp/issues.md
```

### 2.8 sync - GitHub åŒæ­¥

**è¯­æ³•**:
```bash
issue-tracker [-p PROJECT_ID] sync [--dry-run]
```

**åŒæ­¥é€»è¾‘**:
- æŸ¥æ‰¾ `status=fixed` ä¸”æœ‰å…³è” `github_issue_id` çš„æ¡ç›®
- è°ƒç”¨ `gh issue close` è‡ªåŠ¨å…³é—­
- è®°å½•åŒæ­¥æ—¥å¿—ï¼Œé¿å…é‡å¤æ“ä½œ

**ç¤ºä¾‹**:
```bash
# é¢„è§ˆï¼ˆä¸å®é™…æ‰§è¡Œï¼‰
issue-tracker -p 001 sync --dry-run

# å®é™…åŒæ­¥
issue-tracker -p 001 sync
```

**è¾“å‡ºç¤ºä¾‹**:
```
å¾…åŒæ­¥æ¡ç›®: 2 æ¡
------------------------------------------------------------
  001 â†’ GitHub Issue #456 (æ ‡é¢˜: ç¤ºä¾‹é—®é¢˜)
    âœ“ å·²å…³é—­ GitHub Issue #456
  002 â†’ GitHub Issue #457 (æ ‡é¢˜: å¦ä¸€ä¸ªé—®é¢˜)
    âœ“ å·²å…³é—­ GitHub Issue #457
------------------------------------------------------------
åŒæ­¥å®Œæˆ: 2 æˆåŠŸ, 0 å¤±è´¥
```

### 2.9 migrate - å¯¼å…¥æ•°æ®

**è¯­æ³•**:
```bash
issue-tracker [-p PROJECT_ID] migrate \
    --source <æºæ–‡ä»¶> \
    --migrator <migratoråç§°> \
    [--force] \
    [--dry-run]
```

**å‚æ•°è¯´æ˜**:

| å‚æ•° | è¯´æ˜ |
|------|------|
| `--source` | æºæ–‡ä»¶è·¯å¾„ |
| `--migrator` | migrator åç§° (å¦‚ `weldsmart`) |
| `--force` | å¼ºåˆ¶è¦†ç›–å·²æœ‰æ•°æ® |
| `--dry-run` | ä»…è§£æï¼Œä¸å†™å…¥æ•°æ®åº“ |

**æ³¨æ„**: è¿ç§»æ—¶ä¼šè‡ªåŠ¨é‡æ–°åˆ†é…ç¼–å·ä¸ºå…¨å±€é€’å¢åºå·ã€‚

**ç¤ºä¾‹**:
```bash
# é¦–æ¬¡å¯¼å…¥
issue-tracker -p 001 migrate \
    --source all-issues.md \
    --migrator weldsmart

# å¼ºåˆ¶åˆ·æ–°ï¼ˆè¦†ç›–å·²æœ‰æ•°æ®ï¼‰
issue-tracker -p 001 migrate \
    --source all-issues.md \
    --migrator weldsmart \
    --force

# é¢„è§ˆè§£æç»“æœ
issue-tracker -p 001 migrate \
    --source all-issues.md \
    --migrator weldsmart \
    --dry-run
```

---

## 3. æ—¥å¸¸å·¥ä½œæµ

### 3.1 å…¸å‹å·¥ä½œæµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        å¼€å‘å‘¨æœŸ                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  1. æ‹‰å–æœ€æ–°ä»£ç                                                  â”‚
â”‚     â†“                                                           â”‚
â”‚  2. (å¯é€‰) migrate åŒæ­¥ MD â†’ DB                                 â”‚
â”‚     â†“                                                           â”‚
â”‚  3. å¼€å‘è¿‡ç¨‹ä¸­ä½¿ç”¨ query/list/stats æŸ¥è¯¢                         â”‚
â”‚     â†“                                                           â”‚
â”‚  4. æ–°å¢é—®é¢˜: add --title "..." --priority Px                   â”‚
â”‚     â†“                                                           â”‚
â”‚  5. ä¿®å¤é—®é¢˜å update æ›´æ–°çŠ¶æ€                                   â”‚
â”‚     â†“                                                           â”‚
â”‚  6. commit å‰æ‰§è¡Œ export (DB â†’ MD)                              â”‚
â”‚     â†“                                                           â”‚
â”‚  7. git add/commit/push                                         â”‚
â”‚     â†“                                                           â”‚
â”‚  8. (å¯é€‰) sync å…³é—­ GitHub Issue                               â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 åœºæ™¯æ“ä½œæ¸…å•

| åœºæ™¯ | æ“ä½œ |
|------|------|
| **é¦–æ¬¡ä½¿ç”¨** | åˆ›å»ºé…ç½® â†’ `add` æ–°å¢é—®é¢˜ â†’ `stats` éªŒè¯ |
| **æ‹‰å–æœ€æ–°å** | `migrate` (åŒæ­¥ MD â†’ DBï¼Œä¸è¦†ç›–å·²æœ‰ä¿®æ”¹) |
| **æŸ¥æ‰¾é—®é¢˜** | `query --status pending --priority P2` |
| **æ–°å¢é—®é¢˜** | `add --title "..." --priority Px` |
| **ä¿®å¤å®Œæˆ** | `update <id> --status fixed --fix-date today` |
| **æäº¤å‰** | `export` â†’ ç”Ÿæˆæ–°çš„ issues.md |
| **åŒæ­¥ GitHub** | `sync --dry-run` â†’ `sync` |
| **ç»Ÿè®¡æŠ¥å‘Š** | `stats` |

### 3.3 Git å·¥ä½œæµç¤ºä¾‹

```bash
# 1. æ‹‰å–æœ€æ–°
git pull

# 2. (å¯é€‰) åŒæ­¥é—®é¢˜æ¸…å•ï¼ˆå¦‚æœæœ‰æ›´æ–°ï¼‰
issue-tracker -p 001 migrate \
    --source exports/issues.md --migrator weldsmart

# 3. å¼€å‘è¿‡ç¨‹ä¸­æŸ¥è¯¢é—®é¢˜
issue-tracker -p 001 query --status pending

# 4. æ–°å¢é—®é¢˜
issue-tracker -p 001 add \
    --title "æ–°å‘ç°çš„é—®é¢˜" \
    --priority P2 \
    --file "src/core/test.cpp"

# 5. ä¿®å¤åæ›´æ–°çŠ¶æ€
issue-tracker -p 001 update 001 \
    --status fixed \
    --fix-date 2026-02-04 \
    --actual-hours 2

# 6. æäº¤å‰å¯¼å‡º
issue-tracker -p 001 export

# 7. æäº¤
git add exports/issues.md
git commit -m "fix: ä¿®å¤ 001 å‡½æ•°å‚æ•°æ ¡éªŒç¼ºå¤±

Fixes #456"

# 8. åŒæ­¥ GitHubï¼ˆå…³é—­å·²ä¿®å¤çš„ Issueï¼‰
issue-tracker -p 001 sync

# 9. æ¨é€
git push
```

---

## 4. é«˜çº§ç”¨æ³•

### 4.1 ç›´æ¥ä½¿ç”¨ SQLite

æ•°æ®åº“å¯ç›´æ¥ç”¨ `sqlite3` å‘½ä»¤è®¿é—®ï¼š

```bash
# è¿›å…¥æ•°æ®åº“
sqlite3 ~/.local/share/issue-tracker/001_MyProject.db

# æŸ¥è¯¢å¾…å¤„ç†é—®é¢˜
SELECT * FROM v_pending;

# ç»Ÿè®¡æŒ‰æ¨¡å—åˆ†ç»„
SELECT
    CASE
        WHEN file_path LIKE 'src/core%' THEN 'Core'
        WHEN file_path LIKE 'src/hal%' THEN 'HAL'
        WHEN file_path LIKE 'src/business%' THEN 'Business'
        ELSE 'Other'
    END AS module,
    COUNT(*) AS count
FROM issues
GROUP BY module;

# é€€å‡º
.exit
```

### 4.2 ç¼–å†™è‡ªå®šä¹‰æŸ¥è¯¢è„šæœ¬

```python
#!/usr/bin/env python3
import sqlite3

conn = sqlite3.connect('~/.local/share/issue-tracker/001_MyProject.db')
conn.row_factory = sqlite3.Row

# æŸ¥è¯¢è€—æ—¶è¶…è¿‡é¢„è®¡çš„é—®é¢˜
cur = conn.execute('''
    SELECT id, title, estimated_hours, actual_hours
    FROM issues
    WHERE actual_hours > estimated_hours
    AND actual_hours IS NOT NULL
''')

print("è¶…æ—¶é—®é¢˜:")
for row in cur:
    print(f"  {row['id']}: é¢„è®¡{row['estimated_hours']}h å®é™…{row['actual_hours']}h")

conn.close()
```

### 4.3 æ‰¹é‡æ›´æ–°

```bash
# æ‰¹é‡æ ‡è®°ä¸ºå·²ä¿®å¤ï¼ˆä½¿ç”¨ sqlite3ï¼‰
sqlite3 ~/.local/share/issue-tracker/001_*.db \
    "UPDATE issues SET status='fixed', fix_date='2026-02-04' WHERE id IN ('001', '002', '003');"
```

### 4.4 è‡ªå®šä¹‰ XDG ç›®å½•

å¦‚æœå¸Œæœ›ä¿®æ”¹é…ç½®æˆ–æ•°æ®çš„å­˜å‚¨ä½ç½®ï¼Œåœ¨ `~/.bashrc` æˆ– `~/.zshrc` ä¸­è®¾ç½®æ ‡å‡† XDG å˜é‡ï¼š

```bash
export XDG_CONFIG_HOME=$HOME/.config       # é»˜è®¤å€¼ï¼Œé€šå¸¸æ— éœ€ä¿®æ”¹
export XDG_DATA_HOME=$HOME/.local/share    # é»˜è®¤å€¼ï¼Œé€šå¸¸æ— éœ€ä¿®æ”¹
```

### 4.5 é…ç½® Shell åˆ«å

åœ¨ `~/.bashrc` æˆ– `~/.zshrc` ä¸­æ·»åŠ ï¼š

```bash
# Issue Tracker åˆ«å
alias iss='issue-tracker -p 001'
alias issq='iss query'
alias issl='iss list'
alias issp='iss query --status pending'
alias issf='iss query --status fixed'
alias iss-stats='iss stats'
```

ä½¿ç”¨ï¼š
```bash
issq --priority P2 --status pending
iss-stats
```

---

## 5. æ•…éšœæ’æŸ¥

### 5.1 å¸¸è§é”™è¯¯

#### é”™è¯¯: `é¡¹ç›®æŸ¥æ‰¾å¤±è´¥: æœªæ‰¾åˆ°é¡¹ç›® 'xxx' çš„é…ç½®æ–‡ä»¶`

**åŸå› **: é…ç½®æ–‡ä»¶ä¸å­˜åœ¨

**è§£å†³**:
```bash
# æ£€æŸ¥é…ç½®ç›®å½•
ls ~/.config/issue-tracker/

# åˆ›å»ºé…ç½®æ–‡ä»¶
cat > ~/.config/issue-tracker/001_MyProject.yaml << 'EOF'
project:
  id: "001"
  name: "MyProject"
...
EOF
```

#### é”™è¯¯: `ç¼–å· 'abc' æ ¼å¼æ— æ•ˆ`

**åŸå› **: ç¼–å·å¿…é¡»ä¸ºçº¯æ•°å­—

**è§£å†³**:
```bash
# æ­£ç¡®ï¼šä½¿ç”¨çº¯æ•°å­—ç¼–å·
issue-tracker -p 001 add --id 123 --title "..." --priority P2

# æˆ–è€…ä¸æŒ‡å®šç¼–å·ï¼Œè®©ç³»ç»Ÿè‡ªåŠ¨åˆ†é…
issue-tracker -p 001 add --title "..." --priority P2
```

#### é”™è¯¯: `ä¼˜å…ˆçº§ 'Px' æ— æ•ˆ`

**åŸå› **: é…ç½®æ–‡ä»¶ä¸­æœªå®šä¹‰è¯¥ä¼˜å…ˆçº§

**è§£å†³**: ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼Œæ·»åŠ å¯¹åº”ä¼˜å…ˆçº§ï¼š
```yaml
priorities: [P0, P1, P2, P3, Px]
```

#### é”™è¯¯: `ç¼–å· '001' å·²å­˜åœ¨`

**åŸå› **: å°è¯•æ·»åŠ é‡å¤ç¼–å·

**è§£å†³**:
- ä½¿ç”¨ `update` æ›´æ–°ç°æœ‰æ¡ç›®
- æˆ–ä¸æŒ‡å®šç¼–å·ï¼Œè®©ç³»ç»Ÿè‡ªåŠ¨åˆ†é…

#### é”™è¯¯: `gh å‘½ä»¤å¤±è´¥`

**åŸå› **: `gh` CLI æœªå®‰è£…æˆ–æœªç™»å½•

**è§£å†³**:
```bash
# å®‰è£… gh
# https://cli.github.com/

# ç™»å½•
gh auth login
```

### 5.2 æ•°æ®åº“æŸå

å¦‚æœæ•°æ®åº“æŸåï¼Œé‡æ–°è¿ç§»ï¼š

```bash
# åˆ é™¤æ—§æ•°æ®åº“
rm ~/.local/share/issue-tracker/001_*.db

# é‡æ–°è¿ç§»
issue-tracker -p 001 migrate \
    --source exports/issues.md --migrator weldsmart
```

### 5.3 è¿ç§»ç»“æœä¸ä¸€è‡´

å¦‚æœè¿ç§»æ¡ç›®æ•°ä¸é¢„æœŸä¸ç¬¦ï¼š

```bash
# 1. æ£€æŸ¥è­¦å‘Š
issue-tracker -p 001 migrate \
    --source exports/issues.md --migrator weldsmart --dry-run

# 2. æ£€æŸ¥æ•°æ®åº“
sqlite3 ~/.local/share/issue-tracker/001_*.db "SELECT COUNT(*) FROM issues;"

# 3. å¯¹æ¯”æºæ–‡ä»¶
grep -c "^### [0-9]" exports/issues.md
```

---

## 6. æ–°é¡¹ç›®æ¥å…¥æŒ‡å—

### 6.1 åˆ›å»ºé¡¹ç›®é…ç½®

åœ¨é¡¹ç›®ç›®å½•ä¸­è¿è¡Œ `iss-project`ï¼ŒæŒ‰å¼•å¯¼å¼æµç¨‹å¡«å†™ä¿¡æ¯ï¼š

```bash
cd /path/to/new-project
iss-project

# æµç¨‹:
#   é¡¹ç›® ID (çº¯æ•°å­—, å¦‚ 002):    002
#   é¡¹ç›®åç§°:                    NewProject
#   ä¼˜å…ˆçº§åˆ—è¡¨ [P0,P1,P2,P3]:   (å›è½¦æ¥å—é»˜è®¤)
#   çŠ¶æ€åˆ—è¡¨ [...]:              (å›è½¦æ¥å—é»˜è®¤)
#   å¯ç”¨ GitHub åŒæ­¥? [y/N]:     y
#   ...
#   ç¡®è®¤å†™å…¥? [y/N]:             y
#   âœ“ å·²åˆ›å»º: /path/to/new-project/issue-tracker.yaml
```

ç”Ÿæˆçš„ `issue-tracker.yaml` è‡ªåŠ¨åŒ…å«æ‰€æœ‰é…ç½®ï¼Œä¹Ÿå¯éšæ—¶ç”¨ `iss-project` å†æ¬¡ç¼–è¾‘ã€‚

### 6.2 éªŒè¯é…ç½®

```bash
# å°è¯•è®¿é—®é¡¹ç›®
issue-tracker stats

# åº”æ˜¾ç¤ºç©ºç»Ÿè®¡
==================================================
  NewProject - é—®é¢˜ç»Ÿè®¡
==================================================
  æ€»æ•°: 0
...
```

### 6.3 æ–°å¢é—®é¢˜æµ‹è¯•

```bash
issue-tracker add \
    --title "æµ‹è¯•é—®é¢˜" \
    --priority P2 \
    --description "è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•é—®é¢˜"
```

### 6.4 å®ç° Migrator æ’ä»¶ï¼ˆå¯é€‰ï¼‰

å¦‚æœéœ€è¦ä»ç°æœ‰æ•°æ®è¿ç§»ï¼Œåˆ›å»ºè‡ªå®šä¹‰ migratorï¼š

```python
# migrators/custom_migrator.py
from . import BaseMigrator
import re

class CustomMigrator(BaseMigrator):
    def parse(self, source_path: str) -> list[dict]:
        with open(source_path, 'r', encoding='utf-8') as f:
            content = f.read()

        issues = []
        # å®ç°é¡¹ç›®ç‰¹å®šçš„è§£æé€»è¾‘
        # ...

        return issues

    def validate(self, issues: list[dict]) -> list[str]:
        warnings = []
        # æ ¡éªŒé€»è¾‘
        return warnings
```

æ³¨å†Œåˆ° `cli.py` çš„ `_load_migrator` å‡½æ•°ï¼š

```python
def _load_migrator(name: str):
    if name == "weldsmart":
        return WeldSmartMigrator()
    if name == "custom":
        from issue_tracker.migrators.custom_migrator import CustomMigrator
        return CustomMigrator()
    return None
```

### 6.5 æµ‹è¯•è¿ç§»

```bash
# Dry-run é¢„è§ˆ
issue-tracker -p 002 migrate \
    --source your-issues.md \
    --migrator custom \
    --dry-run

# å®é™…å¯¼å…¥
issue-tracker -p 002 migrate \
    --source your-issues.md \
    --migrator custom
```

---

## 7. é™„å½•

### 7.1 çŠ¶æ€ç¬¦å·å¯¹ç…§è¡¨

| ç¬¦å· | çŠ¶æ€å€¼ | å«ä¹‰ |
|------|--------|------|
| âœ… | `fixed` | å·²ä¿®å¤/å·²å®Œæˆ |
| âŒ | `pending` | å¾…ä¿®å¤ |
| ğŸŸ¢ | `in_progress` | è¿›è¡Œä¸­ |
| ğŸ“‹ | `planned` | å¾…è§„åˆ’ |
| âš ï¸ | `n_a` | ä¸é€‚ç”¨ |

### 7.2 ä¼˜å…ˆçº§è¯´æ˜

| ä¼˜å…ˆçº§ | å«ä¹‰ |
|--------|------|
| P0 | ç´§æ€¥ - å½±å“æ ¸å¿ƒåŠŸèƒ½æ­£å¸¸è¿è¡Œ |
| P1 | é«˜ - ä¸¥é‡å½±å“ä»£ç è´¨é‡å’Œå®‰å…¨æ€§ |
| P2 | ä¸­ - å½±å“ä»£ç å¯ç»´æŠ¤æ€§å’Œå¥å£®æ€§ |
| P3 | ä½ - ä»£ç é£æ ¼å’Œæœ€ä½³å®è·µ |

### 7.3 æ–‡ä»¶è·¯å¾„

| æ–‡ä»¶/ç›®å½• | è·¯å¾„ | è¯´æ˜ |
|-----------|------|------|
| é¡¹ç›®é…ç½® | `<é¡¹ç›®ç›®å½•>/issue-tracker.yaml` | é¡¹ç›®æœ¬åœ°é…ç½®ï¼ˆç”± `iss-project` åˆ›å»ºï¼‰ |
| å…¨å±€é…ç½® | `$XDG_CONFIG_HOME/issue-tracker/globals.yaml` | å…¨å±€é»˜è®¤å€¼ï¼ˆç”± `iss-ui` ç®¡ç†ï¼‰ |
| é…ç½®ç›®å½• | `$XDG_CONFIG_HOME/issue-tracker/` | é¡¹ç›®é…ç½®æ–‡ä»¶å­˜å‚¨ï¼ˆé»˜è®¤ `~/.config/issue-tracker/`ï¼‰ |
| æ•°æ®åº“ | `$XDG_DATA_HOME/issue-tracker/` | æœ¬åœ°æ•°æ®åº“å­˜å‚¨ï¼ˆé»˜è®¤ `~/.local/share/issue-tracker/`ï¼‰ |
| å¯¼å‡ºæ–‡ä»¶ | `$XDG_DATA_HOME/issue-tracker/exports/` | Markdown å¯¼å‡ºæ–‡ä»¶ |
| å¤‡ä»½ | `$XDG_DATA_HOME/issue-tracker/backups/` | é¡¹ç›®å¤‡ä»½å­˜å‚¨ï¼ˆtar.gzï¼Œç”± `iss-ui` ç®¡ç†ï¼‰ |

### 7.4 å‘½ä»¤é€ŸæŸ¥è¡¨

| å‘½ä»¤ | åŠŸèƒ½ | å¸¸ç”¨å‚æ•° |
|------|------|---------|
| `add` | æ–°å¢ | `--title`, `--priority` |
| `update` | æ›´æ–° | `--status`, `--fix-date` |
| `query` | æŸ¥è¯¢ | `--status`, `--priority`, `--detail` |
| `list` | åˆ—è¡¨ | `--status` |
| `stats` | ç»Ÿè®¡ | æ—  |
| `export` | å¯¼å‡º | `--output` |
| `sync` | åŒæ­¥ | `--dry-run` |
| `migrate` | å¯¼å…¥ | `--source`, `--migrator`, `--force` |
| `iss-project` | é¡¹ç›®é…ç½®å¼•å¯¼/ç¼–è¾‘ | åœ¨é¡¹ç›®ç›®å½•ä¸‹è¿è¡Œ |
| `iss-ui` | å…¨å±€ç®¡ç†èœå• | å¯åœ¨ä»»æ„ç›®å½•ä¸‹è¿è¡Œ |

---

**æ–‡æ¡£ç»“æŸ**

å¦‚æœ‰é—®é¢˜ï¼Œè¯·å‚è€ƒ `æŠ€æœ¯è®¾è®¡æ–¹æ¡ˆ.md` æˆ–æäº¤ Issueã€‚
